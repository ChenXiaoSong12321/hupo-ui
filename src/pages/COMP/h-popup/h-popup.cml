<template>
<page title="h-popup演示">
  <h-header title="h-popup"></h-header>
  <h-popup-manager show="{{show}}" mask="{{mask}}" c-bind:close="closePopup"></h-popup-manager>
  <h-popup-manager show="{{show2}}" mask="{{mask}}" c-bind:close="closePopup" position="{{position}}">
    <view style="{{contentStyle}}"><text style="font-size: 28cpx;">content</text></view>
  </h-popup-manager>
  <button c-bind:onclick="showPopup" class="btn" text="show popup"></button>
  <button c-bind:onclick="showPopup2" class="btn" text="left/top/right/bottom/center"></button>
</page>
</template>
<script>
class CPopup {

  data = {
    mask: true,
    show: false,
    show2: false,
    position: '',
    pos: ['left', 'top', 'right', 'bottom', ''],
    posi: 0
  }

  computed = {
    contentStyle() {
      let style;
      switch (this.position) {
        case 'left':
          style = 'width:200cpx;background:#fff;'
          break;
        case 'top':
          style = 'height:200cpx;background:#fff;'
          break;
        case 'right':
          style = 'width:200cpx;background:#fff;'
          break;
        case 'bottom':
          style = 'height:200cpx;background:#fff;'
          break;
        default: 
          style="display:block;width: 500cpx;height: 200cpx;background: #fff;";
          break;
      }
      return style;
    }
  }

  watch  = {
  }

  methods = {
    showPopup() {
      this.show = true;
    },
    showPopup2() {
      this.position = this.pos[this.posi++];
      this.posi = this.posi % 5;
      this.show2 = true;
    },
    closePopup() {
      this.show = false;
      this.show2 = false;
    }
  }

  beforeCreate() {
  }

  created() {
  }

  beforeMount() {
  }

  mounted() {
  }

  beforeDestroy() {
  }

  destroyed() {
  }
}

export default new CPopup();
</script>
<style scoped>

.container {
  display: flex;
  flex-direction: column;
  flex: 1;
  background: #f8f8f8;
}
.btn {
  margin-top: 20cpx;
}
</style>
<script cml-type="json">
{
    "base": {
        "usingComponents": {
          "h-header": "../../components/h-header/h-header",
          "h-popup": "/components/h-popup/h-popup",
          "h-popup-manager": "/components/h-popup-manager/h-popup-manager",
        },
        "navigationBarTitleText": "h-popup",
        "backgroundTextStyle": "dark",
        "backgroundColor": "#E2E2E2"
    }
}
</script>
